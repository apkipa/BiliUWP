## 功能计划表

* 应用目前主要针对 Win10 设计，部分系统相关的问题可能已在 Win11 得到解决？待验证

* [ ] 程序布局
  * [x] 标签页视图 (TabView)
    * [x] 标签页右键菜单
      * 如果可能，将从当前的菜单模型迁移(存在阴影 BUG)
      * [x] 页面导航(后退、前进)
        * [x] 基本
        * [ ] IIntraNavigation
      * [ ] 刷新
      * [x] 资源管理
        * [x] 复制资源 ID
    * [x] 标签页内对话框(类似 ContentDialog)
    * [ ] 支持固定标签页(且在设置中可配置自动打开上次关闭的已固定标签页)(需要所有页面加入快照支持)
    * [ ] 多窗口支持(可能需要多线程支持)
    * [ ] 全屏模式下标签页可跟随系统标题栏显示/消失
  * [ ] 标准视图(典型 UWP 应用视图)
    * [ ] 标题返回按钮
    * [ ] 系统层级返回事件处理
  * [ ] 跟随系统的暗主题支持
  * [ ] 如果可能，同时兼容 WinUI 老版与新版控件风格
* [x] 登录
  * [x] 二维码登录
  * [x] Token 登录(针对高级用户设计)(考虑在将来隐藏或移除)
  * [ ] 密码登录
  * [ ] 短信登录
* [ ] 主页
    * [ ] 作为推荐、动态等页面的容器页(...)
    * [ ] 导航栏用户信息(详细信息，交互按钮，...)
* [x] 媒体播放页
    * [x] 视频
      * [x] 基本播放
      * [ ] 显示弹幕
        * [ ] 普通弹幕
        * [ ] 特殊弹幕(代码弹幕、BAS 弹幕等)
      * [ ] 显示字幕
        * [x] 原生(目前仅实现了基本显示)
        * [ ] 自绘
      * [x] 资源过期自动刷新(仅 HRAS 后端)
      * [ ] 负载均衡(可能与资源过期刷新合并实现)(非优先)
        * 根据延迟、速率为每条流评分并对应分配请求，同时丢弃无法访问的流
        * [ ] 系统原生支持(不再考虑，原生后端将被划为遗留接口，仅提供最基本的支持)
        * [ ] HttpRandomAccessStream 后端支持
      * [ ] 详细信息
      * [ ] 评论
      * [ ] 播放期间请求屏幕常亮 (可在设置中调整)
      * [ ] 尝试绕过播放部分 Dash 视频时系统播放器出现的定位 BUG (自定义 MediaSource / 使用 ffmpeg / 使用 Media Foundation)
    * [x] 音频
      * [x] 基本播放
      * [ ] 资源过期自动刷新
      * [ ] 详细信息
      * [ ] 评论
    * [ ] 高级播放设置 (右键菜单、独立侧边栏、浮窗...)
      * [ ] 自定义播放控件 (可绕过系统自带播放控件的状态设置 BUG、CPU 占用 BUG 等)
      * [ ] 媒体循环
        * [ ] 单媒体循环
        * [ ] 单稿件多分 P 整体循环
        * [ ] 单媒体 A-B 循环
      * [ ] 视频作为音频播放 (如果可能)
      * [ ] 小窗播放(PIP 风格，即在弹出的新窗口中播放，原标签页中播放器用占位符代替)
        * 如果是标准视图，不要使用占位符，而是直接将原窗口转为小窗
    * [ ] 视频合集支持
    * [ ] 番剧支持(非优先)
    * [ ] 创建页面时在参数中指定是否覆盖用户偏好而启用/取消自动播放
    * [ ] 互动视频(非优先)
    * [ ] 通过拖拽/开发者选项播放本地/在线音视频(非 B 站资源)，并可选加载弹幕文件
    * [x] 详细信息统计(资源流、带宽、...)
      * [x] 原生
      * [x] HttpRandomAccessStream
* [ ] 直播页
    * [ ] 基本播放
    * [ ] 显示弹幕
* [x] 用户收藏夹列表页面
  * [x] 基本功能
  * [ ] 支持编辑、右键菜单等
* [ ] 个人追番页面 (?)
* [x] 收藏夹详情页面
  * [x] 基本功能
  * [ ] 支持编辑、右键菜单等
* [x] 用户详情页面
    * [ ] 详细信息、交互按钮(刷新、关注、直播间等)
    * [x] 投稿视频
    * [x] 投稿音频
    * [ ] 动态(...)
    * [ ] 投稿专栏
    * [x] 收藏(可考虑复用收藏夹页面)
    * [ ] 用户追番、追剧...
* [x] 设置页
    * [ ] 添加设置项
    * [ ] 完善页面设计
* [ ] 专栏页
    * [ ] 基本显示(通过手动解析 HTML)
    * [ ] 交互操作(收藏、点赞...)
* [x] 导航页
    * [x] 输入框
        * [x] 打开搜索页面
        * [ ] 导航至指定资源
            * [ ] 纯资源 ID
            * [ ] 站内链接指向资源
                * [ ] 标准链接
                * [ ] 短链接 (b23.tv)
* [ ] 搜索页
    * [ ] 基本显示
* [ ] 动态页(单)
    * [ ] 基本显示
* [ ] 动态页(流)
    * [ ] 用户动态
    * [ ] 关注动态
* [ ] 调试控制台
    * [x] 允许在单独的窗口中查阅日志
        * [ ] 提升渲染交互性能 (非优先)
        * [x] 改变控制台日志机制 (TextBlock → ListView)
        * [ ] 允许筛选日志
    * [x] 支持转存日志至本地文件
* [ ] 图片查看控件
    * [ ] 基本显示
    * [ ] 支持在新标签页中打开
    * [ ] 滚轮、键盘等手势操作
    * [ ] 播放 GIF 时支持播放控制
        * [ ] 基本播放控制 (播放、暂停；直接使用系统自带功能)
        * [ ] 高级播放控制 (进度条、倍速、帧步进/步退；需要重写 GIF 加载机制)
* [ ] 代码质量
    * [ ] 程序配置
        * [ ] 解析配置版本，校验完整性
        * [ ] 当导入老版本配置时自动迁移为新版本
    * [ ] 代码设计
        * [ ] 单元测试
          * [ ] HttpRandomAccessStream
          * [ ] util::winrt::task
        * [ ] 整理优化 TabView hack 逻辑
        * [ ] 访问 App 内部数据结构(如 AppTab 等)时加锁
    * [ ] 当程序 suspend 时自动保存当前快照，并由用户决定是否恢复快照
    * [ ] 如果可能，修复内存泄漏
